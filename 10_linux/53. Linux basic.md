# 53. Linux basic

- 리누스토발즈가 만든 유닉스 복제판
- 대학교 재학시 유닉스를 테스트하기가 힘들어서 pc에 이식해보자고 시작
- Linux is not unix
- 리눅스를 오픈소스로 공개하면서 오픈소스 생태계가 급격히 확장

---

> **영향 관계도**
>
> unix :arrow_right: macOS :arrow_right: MS-Windows
>  	 :arrow_right: Linux

- unix를 만들기 위해서 C를 만들었다. C를 이용해서 Unix를 만들었다.
- Linux를 pc(ibm 호환)에 설치해서 unix를 사용가능하게됨
  :warning: 하드웨어가 다르기 때문에 unix라고 할수는 없음
- 리누스토발즈는 git 개발자로도 유명



### 01.가상환경 & 서버 관리

**가상컴퓨팅 SW**

1. vmware
   - 상용. 무료버전 제공되었다가 말았다가 
2. virtualbox
   - 오라클 제공. 무료
   - vmware보다 기능이 안좋았으나 최근 많이 좋아짐
3. parallels
   - Mac용. Mac에서 MS-Windows를 사용하고 싶을 때 많이 사용

---

**리눅스 배포판 계열**

1. 데비안 계열
   - 우분투가 유명. 우분투는 개인용으로 많이 사용하지만 서버로 사용 가능
2. 레드햇 계열
   - CentOS가 유명. 레드햇 엔터프라이즈 버전(상용)의 무료버전

---

**개발자 != 관리자**

1. 회사에 <u>서버관리자</u>와 개발자가 따로 있어야함
2. Devops
   - 개발과 운영을 같이 한다는 의미
   - 개발자+서버관리자
3. 최근에는 cloud를 많이 사용



1) <u>on premise</u>

- 서버를 회사에서 직접 구축. 자체 전산실을 구축해서 서버를 운영

2) idc에서 서버를 보관

- 서버를 직접 구축하되 호스팅업체 idc 센터에 서버를 보관
- 서버를 렌탈하거나 직접 구매하여 설치

3) 클라우드

- AWS가 대표적, MS Azure, Google Cloud, Oracle Cloud, Naver Cloud, KT Cloud 등
- 클라우드는 무조건 안전한가? :arrow_right: 장애가 꽤 발생



**서버 관리자가 가장 신경써야할 일**

1. 백업
2. 사후처리 시뮬레이션
3. 보안

---

**cloude는 어떤 기업에 적합한가**

1. cloud는 종량제
   - 사용한 양만큼 과금됨. 사용량을 초과해도 일반적으로는 중지되지 않음
   - 웹호스팅은 정액제. 사용양이 제한되어 있고, 사용량을 초과하면 서버가 중지될 수 있음
2. cloud는 서비스추가/확장/삭제 편리
   - 신규서비스를 추가하거나 확장하거나 삭제하기 편리
   - on premise로 한다면 서버구매, 인력채용, 전산실구축등 시간이 오래걸림
   - 우리회사 서비스가 새로 추가되거나 확장.축소되거나 삭제되는 일이 빈번하다면 cloud가 적합. 비용면에서도 유리할 수 있음
   - 우리회사는 서비스가 1,2개이고 다른 서비스가 추가될 일이 거의없고 서비스의 급격한 확장도 예상되지 않는다면?
     - 호스팅. on premise가 더 유리할 수 있음
   - 회사에 맞는 개발환경 구축이 필요

---

**AWS는 전문가 수준의 개발환경 구축에 필요한 옵션 거의 제공**

- 서버+네트워크 개발자의 지식이 필요
- 우리회사에 정말 필요한가?
- 여러옵션은 과금으로 연결될 수 있음
- 동시접속자가 많고 데이터처리량이 많은 소수의 기업이 아닌 경우는 많은 옵션이 필요없음

---

**AWS lightsail** (클라우드를 사용해야 한다면)

- 필요한 옵션을 미리 세팅해 놓음
- 비용면에서 효과적일 수 있음
- AWS기반. AWS EC2로 쉽게 마이그레이션
- 중소기업 추천

---

**Cloud Engineer**

- Cloud를 이용해서서버구축.운영 하는 새로운 직군

---

**호스팅을 한다면,**

- 서버관제서비스(보안관제서비스)가입 고려


- 전문업체에서 24시간 서버를 모니터링

---



### 02. Download

- vmware fusion : MAC 용
- [다운로드 설명](https://foxydog.tistory.com/176)
- [Ubumtu 다운로드](https://ubuntu.com/download/desktop)
- [Boardcom.com 회원가입](https://www.broadcom.com/)
- [Vmware Workspace Pro 다운로드](https://www.vmware.com/products/desktop-hypervisor/workstation-and-fusion)
  - Windows (ver.17.5.2)



> **가상화기술에서 image란?**
>
> original을 복제 한것
>
> image를 뜬다. image를 생성하다.
>
> imgae는 가상머신에 적용함



**Linux는 Unix의 복제판**

- unix는 원래 서버용 OS

- 서버는 GUI가 크게 중요하지 않다

  - CLI(Command Line Interface)

  - **unix** shell or terminal

  - **Windows** cnd. 명령프롬프트

  - **MAC** terminal

    에서 명령어로 주로 작업

    후에 x-windows 도입 됨

> **ubuntu desktop vs server**
>
> - desktop버전이 개인이 사용하기에 더 편리
>
> AWS에 리눅스를 설치하면 기본적으로 cli only로 설치됨
>
> - 전문적인 서버관리자는 편리하지만 일반사용자는 gui가 없으므로 불편
> - gui를 설치할 수 있음



### 03. 시작

- VMware Workstation을 실행 > 새 프로젝트 > iso파일 import

> **Linux를 pc에 설치하는 방법**
>
> 1. pc에 Linux Only
> 2. pc에 MS-Windows + Linux 듀얼부팅
> 3. VMware 같은 가상환경에 Linux 설치
>
> [설치 방법](https://ckang.tistory.com/78)

- ubuntu설치중 서드파트, 추가 설치 둘 다 체크
- 탐색기의 `Other location+` 에서 Ubuntu의 rood dir을 확인 및 위치 열기 가능
- **한글**이 입력되지 않을 경우 settings > keyboard > add input source > `Korea (Hangul)` 추가 > 오른쪽 상탄에 언어 설정
- **시스템을 한국어로 변경** settings > system> region&language > 한국어 설정
  + `manage installed languages` 에서 한글 설치





> **Terminal 명령어**
>
> - `pwd` 현재 위치
>
> - `ls` 현재 위치의 파일 목록
>
>   - `ls -l` 파일 목록 + 수정 날짜와 시간
>
> - `date` 날짜
>
> - `echo hello`
>
>   ```bash
>   #출력
>   hello
>   ```
>
> - `cd 경로` (change directory) 경로로 이동
>
>   - `cd ~` home으로 이동
>
> - `mkdir 폴더이름` (make directory) 폴더 생성
>
>   - `mkdir -p report/2021/05` **-p** 디렉토리 연속 생성
>
> - `rm` (remove) 
>
>   - `rmdir 폴더이름` 폴더 삭제 (비어있는 폴더만 가능) 
>
> - `cp -r 복사할폴더이름 복사될새폴더이름`
>
> - `mv 이동할폴더이름 이동할폴더위치이름`
>
> - `touch 파일명` 파일 생성
>
>   - `ls -l`로 `d` 폴더형식인지 아닌지 확인 가능
>
> - `cat 파일명` 파일 읽기
>
> - `ln -s 원본파일 심볼릭파일이름`
>
>   - `ls -l`로 확인해보면 원본파일을 가리키는것을 확인가능
>
> - `sudo dpkg -i 패키지_파일명.deb` deb파일 설치
>
>   - 파일 우클릭 > open with... 에서 App center로 다운받을 수 있다.
>
> :arrows_clockwise: 방향키 :arrow_up: 를 누르면 명령어 캐시가 남아있어서 이전 명령어를 쉽게 불러올 수 있음

**심볼릭링크?**

- 원본파일을 가리키는 가상파일 - 윈도우의 바로가기 같은 개념
- 특정 디렉토리나 파일을 빨리 찾기 위해서 경로를 짧게 사용하기 위새 사용
  - 예) `/home/ubuntu/data/list/app/list.txt`
    ​      `/home/ubuntu/list_s.txt` :arrow_right: `list.txt` 심볼릭


### 04. `vim`

- `sudo apt install vim` 으로 터미널에서 설치
- `vim 파일이름` 으로 수정가능

📘 **Vim 주요 명령어**

| 🔹 분류              | 명령어                | 설명                   |
| ------------------ | ------------------ | -------------------- |
| **모드 전환**          | `i`                | 입력 모드 진입 (커서 앞에서 입력) |
|                    | `I`                | 줄 맨 앞에서 입력 시작        |
|                    | `Esc`              | 명령 모드로 돌아가기          |
|                    | `:`                | 명령줄 모드 진입 (하단 입력)    |
| **저장 / 종료**        | `:w`               | 저장                   |
|                    | `:q`               | 종료                   |
|                    | `:wq`              | 저장 후 종료              |
|                    | `:q!`              | 저장 없이 강제 종료          |
|                    | `:x`               | 저장 후 종료 (`:wq`와 유사)  |
| **이동**             | `h`, `j`, `k`, `l` | ← ↓ ↑ → 방향 이동        |
|                    | `gg`               | 문서 맨 처음으로 이동 (O와 유사) |
|                    | `G`                | 문서 맨 끝으로 이동 ($와 유사)  |
|                    | `:n`               | n번째 줄로 이동 (`:10` 등)  |
| **복사 / 삭제 / 붙여넣기** | `yy`               | 현재 줄 복사              |
|                    | `dd`               | 현재 줄 삭제              |
|                    | `p`                | 붙여넣기                 |
|                    | `x`                | 한 글자 삭제              |
| **실행 취소 / 재실행**    | `u`                | 실행 취소 (Undo)         |
|                    | `Ctrl + r`         | 다시 실행 (Redo)         |
| **검색**             | `/문자열`             | 아래 방향으로 검색           |
|                    | `?문자열`             | 위 방향으로 검색            |
|                    | `n`                | 같은 방향으로 다음 검색 결과     |
|                    | `N`                | 반대 방향으로 검색 결과        |



### 05. 권한

- `ls -l`을 터미널에서 출력하면 권한을 확인할 수 있음

✅ **리눅스 파일 권한 (`-rwxr-xr--`) 개념 요약**

리눅스에서 `ls -l` 명령어를 입력하면 아래처럼 보이는 **문자열**이 파일/디렉토리의 **권한 정보**를 나타냄

```diff
-rwxr-xr--
```

📌 **구성 설명**

| 위치     | 의미               | 예시                      | 설명                       |
| ------ | ---------------- | ----------------------- | ------------------------ |
| 1번째    | 파일 종류            | `-` (일반 파일), `d` (디렉토리) | 예: `-`는 일반 파일, `d`는 디렉토리 |
| 2~4번째  | **파일 소유자 권한**    | `rwx`                   | 읽기(r), 쓰기(w), 실행(x) 가능   |
| 5~7번째  | **같은 그룹 사용자 권한** | `r-x`                   | 읽기(r), 실행(x)만 가능, 쓰기 불가  |
| 8~10번째 | **기타 사용자 권한**    | `r--`                   | 읽기만 가능, 쓰기/실행 불가         |

🔍 **예시 분석**

| 항목                | 설명                |
| ----------------- | ----------------- |
| `-`               | 일반 파일             |
| `rwx` (소유자)       | 읽기, 쓰기, 실행 모두 가능  |
| `r-x` (같은 그룹 사용자) | 읽기, 실행 가능 / 쓰기 불가 |
| `r--` (기타 사용자)    | 읽기만 가능            |

🎯**각 권한의 의미**

| 권한   | 기호   | 의미                              |
| ---- | ---- | ------------------------------- |
| 읽기   | `r`  | 파일: 내용 읽기 / 디렉토리: 목록 보기         |
| 쓰기   | `w`  | 파일: 내용 수정 / 디렉토리: 파일 생성·삭제      |
| 실행   | `x`  | 파일: 실행(실행 파일일 경우) / 디렉토리: 진입 가능 |

**🔹리눅스 권한의 문자 vs 숫자 대응 개념 요약**

- 문자 권한 (`rwx`)와 숫자 권한 (`7`, `5`, `4`)의 관계

| 권한   | 문자   | 숫자   | 설명                   |
| ---- | ---- | ---- | -------------------- |
| 읽기   | `r`  | 4    | 파일 내용 읽기, 디렉토리 목록 보기 |
| 쓰기   | `w`  | 2    | 파일 수정, 디렉토리 파일 생성/삭제 |
| 실행   | `x`  | 1    | 파일 실행, 디렉토리 진입 가능    |
| 없음   | `-`  | 0    | 해당 권한 없음             |

📘 **숫자 퍼미션 예시**

`chmod 754 myfile` 처럼 쓰면:

| 대상         | 숫자        | 권한 (문자) | 설명           |
| ---------- | --------- | ------- | ------------ |
| 소유자 (user) | 7 = 4+2+1 | `rwx`   | 읽기 + 쓰기 + 실행 |
| 그룹 (group) | 5 = 4+0+1 | `r-x`   | 읽기 + 실행      |
| 기타 (other) | 4 = 4+0+0 | `r--`   | 읽기만 가능       |

🎯**자주 쓰는 퍼미션 조합**

| 숫자    | 문자          | 설명                            |
| ----- | ----------- | ----------------------------- |
| `777` | `rwxrwxrwx` | 누구나 모든 권한 (주의 필요)             |
| `755` | `rwxr-xr-x` | 실행 파일에 자주 사용 (소유자만 수정 가능)     |
| `644` | `rw-r--r--` | 일반 텍스트 파일에 자주 사용 (소유자만 수정 가능) |
| `600` | `rw-------` | 비밀 파일, 소유자만 읽고 쓸 수 있음         |

------

✅ 숫자 방식은 `chmod`로 권한 설정할 때 빠르고 간편하게 사용할 수 있다.

**변경 명령어 요약**

| 명령어     | 설명                      |
| ------- | ----------------------- |
| `chmod` | 권한 변경 (`chmod 755 파일명`) |
| `chown` | 소유자 변경                  |
| `chgrp` | 그룹 변경                   |



> **예제**
>
> ```diff
> -rw-rw-r--
> ```
>
> | 위치    | 의미               | 설명                            |
> | ----- | ---------------- | ----------------------------- |
> | `-`   | 일반 파일            | 디렉토리는 `d`                     |
> | `rw-` | 소유자(user) 권한     | 읽기(r) + 쓰기(w) → 4 + 2 = **6** |
> | `rw-` | 그룹(group) 권한     | 읽기(r) + 쓰기(w) → 4 + 2 = **6** |
> | `r--` | 기타 사용자(other) 권한 | 읽기(r) → **4**                 |
>
>  **숫자 퍼미션으로 변환**
>
> - 소유자: `rw-` → 6
> - 그룹: `rw-` → 6
> - 기타: `r--` → 4
>
> 따라서 숫자 퍼미션은 **664** 



