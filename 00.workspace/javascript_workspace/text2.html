<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>회원가입</title>
  <script>
    function check(){
      if(document.joinForm.id.value==""){
        alert("id를 입력하세요");
        document.joinForm.id.focus(); // focus주기
        return; //함수종료
      }
      if(document.joinForm.email.value==""){
        alert("email을 입력하세요");
        document.joinForm.email.focus();
        return; //함수종료
      }
      // if(document.joinForm.email.value.indexOf("@")==-1){
      //   alert("email이 올바른형식이 아닙니다.");
      //   document.joinForm.email.select();
      //   return;
      // }

      const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;  // email 정규식
      console.log(emailRegex.test(document.joinForm.email.value));
      if(!emailRegex.test(document.joinForm.email.value)){
        alert("email이 올바른형식이 아닙니다.");
        document.joinForm.email.select();
        return;
      }


      if(document.joinForm.password.value==""){
        alert("password을 입력하세요");
        document.joinForm.password.focus();
        return; //함수종료
      }
      if(document.joinForm.password2.value==""){
        alert("password확인을 입력하세요");
        document.joinForm.password2.focus();
        return; //함수종료
      }
      if(document.joinForm.password.value!=document.joinForm.password2.value){
        alert("password확인이 일치하지 않습니다.");
        document.joinForm.password2.select();
        return; //함수종료
      }
      
      document.joinForm.submit(); // form에 입력한 값 전송
      
    }
    
    function check2(){
      if(document.joinForm.id.value==""){
        alert("id를 입력하세요");
        document.joinForm.id.focus(); // focus주기
        return false; //함수종료. return값 false
      }
      if(document.joinForm.email.value==""){
        alert("email을 입력하세요");
        document.joinForm.email.focus();
        return false; //함수종료
      }

      // if(document.joinForm.email.value.indexOf("@")==-1){
      //   alert("email이 올바른형식이 아닙니다.");
      //   document.joinForm.email.select();
      //   return false;
      // }

      const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;  // email 정규식
      console.log(emailRegex.test(document.joinForm.email.value));
      if(!emailRegex.test(document.joinForm.email.value)){
        alert("email이 올바른형식이 아닙니다.");
        document.joinForm.email.select();
        return false;
      }
      
      if(document.joinForm.password.value==""){
        alert("password을 입력하세요");
        document.joinForm.password.focus();
        return false; //함수종료
      }
      if(document.joinForm.password2.value==""){
        alert("password확인을 입력하세요");
        document.joinForm.password2.focus();
        return false; //함수종료
      }
      if(document.joinForm.password.value!=document.joinForm.password2.value){
        alert("password확인이 일치하지 않습니다.");
        document.joinForm.password2.select();
        return false; //함수종료
      }
      
    }
  
  </script>
</head>
<body>
  <div id="container">
    <h1>회원가입을 환영합니다.</h1>
    <form action="register.jsp" method="post" name="joinForm" onsubmit="return check2()">
      <input type="hidden" name="type" value="direct">
      <ul>
        <li>
            <label for="id">아이디</label>
            <input type="text" id="uid" name="id" placeholder="4글자~20글자" autofocus>
        </li>
        <li>
          <label for="umail">이메일</label>
          <input type="text" id="umail" name="email">
        </li>
        <li>
          <label for="pwd1">비밀번호</label>
          <input type="password" id="pwd1" name="password">
        </li>
        <li>
          <label for="pwd2">비밀번호 확인</label>
          <input type="password" id="pwd2" name="password2">
        </li>
        <li>
          <input type="radio" name="mailing" id="mailing_y" value="mailing_yes" checked>
          <label for="mailing_y">메일수신</label>
          <input type="radio" name="mailing" id="mailing_n" value="mailing_no">
          <label for="mailing_n">메일수신 안함</label>          
        </li>
        <li>
          <label for="birth">생년월일</label>
          <input type="date" id="birth" name="birth">
        </li>
        <li>
          <label for="picture">사진</label>
          <input type="file" id="picture" name="picture">
        </li>
       <li>
         <label for="about">자기소개</label><br>
         <textarea id="about" name="introduce" cols="40" rows="5"></textarea>
       </li>
       <li>
        <label for="job">직업</label>
        <select id="job" name="job">
          <option value="학생">학생</option>
          <option value="사무원">사무원</option>
          <option value="공무원">공무원</option>
        </select>
       </li>
       <li>
        <label for="hobby">취미</label>
        <input type="checkbox" name="hobby1" value="등산"> 등산
        <input type="checkbox" name="hobby2" value="독서"> 독서
        <input type="checkbox" name="hobby3" value="코딩"> 코딩
        <input type="checkbox" name="hobby4" value="운동"> 운동
       </li>
        
      </ul>
      <div>
        <input type="button" value="가입하기" onclick="check()">
        <button>가입하기</button>

        <input type="submit" value="가입하기">
        <input type="reset" value="취소">

        <button type="button" onclick="check()">가입하기</button>
        <button type="reset">취소</button>

      </div>
    </form>
  </div>
  
</body>
</html>