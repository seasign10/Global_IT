# 20. RDB

- Relational Data Base
- *예)* 
  `Oracle` `MySQL` `MariaDB` `MS-SQLServer`  `SYBASE` `DB2` (다수용)
  `Access` (개인용)



## 데이터 모델의 개념



> **관계 데이터 모델 장점**
>
> - 중첩된 복잡 구조가 없음 - **데이터 중복** :arrow_double_down:
> - 숙련되지 않은 사용자도 쉽게 이해할 수 있음 - **접근성** :arrow_double_down:



### 01.도메인(domain)

- 특정 값 또는 값의 범위라는 의미
- *예) web에서 domain은 www.naver.com 서버를 가르키는 이름*
  *si업체나 it회사에서 '특정 domain을 경험한 사람만 채용' :arrow_right: 여기서의 domian은 금융, 자동화 등 분야를 의미*
- 테이블의 한 attribute에 포함된 값


---

*릴레이션의 예)*

| 기본 키(식별자\|identifier) | 열1(attribute) | 열2(attribute) 내포(intension) |
| --------------------- | ------------- | --------------------------- |
| 기본 행1(tuple)          | 1             | 외포(extension)               |
| 기본 행2(tuple)          | 2             | 외포(extension)               |

- Cardinality (행들의 수) 2개
- Degree|차수(열들의 수) 3개
- 열1의 도메인 [1, 2]
- `Relation` == `Entity Set` == `Table`
  `Entity` 는 하나를 뜻함, 엔티티가 모이면 `Relation`

---



### 02.용어들의 대응 관계

| 공식적인 용어                    | 자주 사용되는 용어 | 파일 시스템의 용어 |
| -------------------------- | ---------- | ---------- |
| Relation = Entity (Set 생략) | Table      | File       |
| Tuple                      | Row/Record | Record     |
| Attribute                  | Coulmn     | Fild       |

- 공식적인 용어는 RDB 개념에서 사용



### 03.널값(Null value)

- `알려지지 않음` `적용할수 없음`을 나타내기 위함
- Null은 0, 공백문자, 공백 문자열이 아니다. 이 값들은 모두 특정한 값을 나타내는 반면에 널은 값이 없음을 나타낸다.



**릴레이션 스키마**

- 릴레이션의 이름과 릴레이션의 애트리뷰트들의 집합
- 릴레이션을 위한 틀(framework)



**릴레이션 인스턴스**

- 릴레이션에 어느 시점에 들어있는 튜플들의 집합
- 정적이지 않고 시간의 흐름에 따라 계속 변함 (새로운 튜플 삽입 또는 삭제)



### 04. 릴레이션의 키

- 각 튜플을 고유하게 식별할 수 있는 하나 이상의 애트리뷰트들의 모임
  - 수퍼 키(super key), 후보 키(candidate key), <u>기본 키(primary key)</u>, 대체 키(alternate key), <u>외래 키(foreing key)</u>

> - **수퍼 키**가 가장 큰 개념, 중복이 되지 않는 키
> - 후보 키 중에 **기본 키**와 **대체 키**가 존재
> - <u>기본 키로 선정되지 않은 후보 키</u>가 **대체 키**, 식별자가 될 수 있다.
> - 즉, <u>주 식별자(identifier)는 기본 키(primary key)</u>
>   - 무엇을 식별 하는가? `row`
> - 외래 키는 참조 키라고도 함
> - 두 개 이상의 Attribute를 묶어서 만드는 기본키를 **복합키(composit key)**라고 한다. (외래 키가 많을 경우, 중복 되지 않기 위해 사용)
>   :arrow_forward: 제2 정규화에 사용 / 실무에서는 잘 사용하지 않음



#### 외래키

- 어떤 릴레이션의 기본 키를 참조하는 Attribute
- 참조 키 라고도 함

*예)*

[릴레이션1]

| No    | NAME    | PNO     |
| ----- | ------- | ------- |
| **1** | **SUN** | **123** |
| 2     | MOON    | 456     |

[릴레이션2]

| PERSONID | AGE    |
| -------- | ------ |
| 456      | 24     |
| **123**  | **32** |

- [릴레이션1]의 PNO는 **외래키**
- [릴레이션2]의 PERSONID 는 **기본키**
- 외래키로 다른 릴레이션을 참조할 수 있다. 
  *예) SUN의 나이를 알기 위해서 PNO를 이용하여 릴레이션1를 참조하면, 32 인 것을 알 수 있다.*



*자체 릴레이션의 기본키를 참조하는 외래키 예)*

| EMPNO    | EMPLNAME | MANAGER  |
| -------- | -------- | -------- |
| 2106     | 김철수      | **3426** |
| **3426** | **신짱구**  | 3011     |
| 3011     | 한유리      | null     |

- 김철수의 상사는 신짱구, 신짱구의 상사는 한유리 인 것을 참조 할 수 있다.



### 05.데이터 무결성

- 데이터 무결성(data integrity)은 **데이터의 정확성 또는 유효성**을 의미 (결함X)
- 일관된 데이터베이스 상태를 정의하는 규칙들을 묵시적 또는 명시적으로 정의
- 데이터베이스가 갱신될 때 DBMS가 자동적으로 일관성 조건을 검사하므로 응용 프로그램들은 일관성 조건을 검사할 필요가 없다.



#### 5-1. Validation 유효성 검증

- 값이 유효한지 검증
- front end - `javascript`
- back end - `jsp`, `db` (check 사용)



#### 5-2. 도메인 제약조건(domain constraint)

- 각 애트리뷰트 값이 반드시 원자값
- 애트리뷰트 값의 디폴트 값, 가능한 값들의 범위 등을 지정 가능
- 데이터 형식을 통해 값들의 유형을 제한, CHECK 제약조건을 통해 값들의 범위를 제한할 수 있음
- SQL2는 도메인을 명시적으로 정의하는 것을 허용, 하지만 Oracle은 지원하지 않음



#### 5-3. 키 제약조건(key constriant)

- 키 애트리뷰트에 중복된 값이 존재해서는 안됨



> 1. 외래키가 설정되면 기본키를 참조하는 데이터가 존재하는 경우 기본키 데이터 삭제 불가
> 2. 외래키를 만들 때 `cascade`(계단식 제약 조건) 옵션을 사용하면 가능

