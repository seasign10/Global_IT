# 22. ERD

- 데이터베이스 설계

| 단계             | 기능                       | 질문                  |
| -------------- | ------------------------ | ------------------- |
| 요구사항 **분석** 단계 |                          |                     |
|                | 요구사항 수집과 분석              |                     |
| **설계** 단계      |                          |                     |
| 개념적 설계         | ER 모델링 또는 객체 지향 모델       | 어떤 엔티티와 관계들이 요구되는가? |
| DBMS의 선정       |                          | 어떤 DBMS가 적절한가?      |
| 논리적 설계         | 개념적 설계를 데이터베이스 스키마로 사상   | 데이터베이스가 무엇을 모델링하는가? |
| 스키마 정제         | 중복을 제거 - 데이터베이스 스키마의 정규화 | 데이터베이스가 무엇을 모델링하는가? |
| 물리적 설계         | 성능상의 문제를 고려하여 인덱스 등을 정의  | 어떤 성능을 원하는가?        |
| 보안 설계          | 사용자들의 그룹과 접근 제한          | 어떤 수준의 보안을 원하는가?    |
| **구현** 단계      |                          |                     |
| 운용/유지보수        | 데이터베이스의 구축과 **튜닝**       |                     |

- 구현하는 것 까지 SI(System Integrator)
- 운용 하는 것은 SM(Software Management)



### 01. 엔티티(Entity)

- 하나의 엔티티는 사람, 장소, 사물, 사건 등과 같이 독립적으로 존재하면서 고유하게 식별이 가능한 실세계의 객체

- 사원처럼 실체가 있는 것도 있지만 생각, 개념과 같이 추상적인 것도 있음

- 구현하기 위해 설계하는 것

  - 설계 자체가 목적이 되면 안됨

- 논리적으로는 N:M(다:다) 관계가 존재

  - 실제 물리적으로 구현할 때는 1:N, M:1 로 변환해서 구현

- **주어**(엔티티) **동사**(관계) **목적어**(애트리뷰트) 관계로 테이블을 구성

  - 예1) 학생이 과목을 수강신청 한다.

    - **주어** 학생
    - **동사** 수강신청
    - **목적어** 과목

    학생과 과목이 N:M관계, 중간에 수강신청 테이블을 만들어서 1:N, M:1로 구현

  - 예2) 회원이 상품을 주문한다.

    - **주어** 회원
    - **동사** 주문
    - **목적어** 상품

    회원과 상품이 N:M관계. 중간에 주문 테이블을 만들어서 1:N, M:1로 구현



### 02. 테이블 설계

1. 비즈니스 로직을 글로 작성
2. 명사. 동명사(동사)를 모두 추출
3. 명사는 단독테이블. 동명사는 관계테이블로 구현
4. 단, 명사중에는 테이블에 종속되는 컬럼일 수도 있음



- (학생)테이블은 (학번, 이름, 주소, 학과)컬럼이 표시되어야 한다.
  - 명사를 파악한 다음 주종관계 정리. 주-테이블, 종-컬럼 이 될 수 있음



- Oracle > 보기 > Data Modeler > 브라우저 > 관계형 모델 추가 > 새테이블 > 드래그
- *ERD 예제)*
  - `member` > `order` < `order_detail` > `goods`
  - 모델링 설계를 하게되면 실질적 N:M은 없고 1:N의 구조로 이루어져있다.
    1. 하나의 멤버가 주문을 여러개
    2. 하나의 주문에서 상세 주문(개수, 세일된 가격 ... ) 여러개
    3. 하나의 물건에서 여러 주문