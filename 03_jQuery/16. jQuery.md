# 16. jQuery

- JavsScript 라이브러리
  `$(선택자)`
- 예전 자바스크립트는 DOM작업, ajax 작업을 하지 불편했다.
  - 보다 쉽고 편리하게 구현하기 위해 만들어진 라이브러리



#### 장점

1. DOM작업이 편리
2. Ajax작업이 편리
3. Transition, Animation 작업이 편리
4. html과 javascript 코드가 분리 되어 협업 및 유지보수 편리



*예제)*

```html
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>jquery</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script>
    $(document).ready(function(){
      $("#title").css("color", "red");
      $(".title").css("color", "blue");
      $("div>div>div").css("fontSize", 32);

      // on : addEventListener
      // click : onclick
      $("#btn1").on("click",function(){console.log("on")}); 
      $("#btn2").click(function(){console.log("click")}); 
    });
  </script>
</head>
<body>
  <h1 id="title">jQuery</h1>
  <h1 class="title">jQeury</h1>

  <div>
    <div>
      <div>jQeury</div>
    </div>
  </div>

  <button id="btn1">on</button>
  <button id="btn2">click</button>
  
</body>
</html>
```



- `show` `hide` `toggle` 을 이용한 *예제)*

  ```html
  <!DOCTYPE html>
  <html lang="ko">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jQeury</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>
      $(document).ready(function(){
        $("#btn1").click(function(){
          $("#message").show();
        });
        $("#btn2").click(function(){
          $("#message").hide();
        });
        $("#btn3").click(function(){
          $("#message").toggle(1000); // 1초
        });
        $("#btn4").click(function(){
          $("#message").fadeIn();
        });
        $("#btn5").click(function(){
          $("#message").fadeOut();
        });
        $("#btn6").click(function(){
          $("#message").fadeToggle();
        });
        $("#btn7").click(function(){
          $("#message").slideDown();
        });
        $("#btn8").click(function(){
          $("#message").slideUp();
        });
        $("#btn9").click(function(){
          $("#message").slideToggle();
        });
      });
    </script>
  </head>
  <body>
    <button id="btn1">show()</button>
    <button id="btn2">hide()</button>
    <button id="btn3">toggle()</button>
    <button id="btn4">fadeIn()</button>
    <button id="btn5">fadeOut()</button>
    <button id="btn6">fadeToggle()</button>
    <button id="btn7">slideDown()</button>
    <button id="btn8">slideUp()</button>
    <button id="btn9">slideToggle()</button>
    <div id="message">jQuery is easy</div>
  </body>
  </html>
  ```



#### Animation

> ##### Stack
>
> 동전쌓기 처럼 First In Last Out, Last In First Out
>
> ##### Queue
>
> First In First Out

```html
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>jQuery</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script>
    $(document).ready(function(){
      $("#btn1").click(function(){
        $("div").animate({left: '250px', opacity:0.5, height:'150px', width: '150px'}, 3000);
      })

      $("#btn2").click(function(){
        $("div").animate({
          left: "250px",
          height: "+=150px",
          width: "+=150px"
        });
      })

      $("#btn3").click(function(){
        var div = $("div");
        // div.animate({height: '300px', opacity: '0.4'}, "slow");
        // div.animate({width: '300px', opacity: '0.8'}, "slow");
        // div.animate({height: '100px', opacity: '0.4'}, "slow");
        // div.animate({width: '100px', opacity: '0.8'}, "slow");
        div.animate({height: '300px', opacity: '0.4'}, "slow")
        .animate({width: '300px', opacity: '0.8'}, "slow")
        .animate({height: '100px', opacity: '0.4'}, "slow")
        .animate({width: '100px', opacity: '0.8'}, "slow", function(){
          console.log("애니메이션 종료 후 작업(콜백 함수)");
        });

        // 애니메이션이 끝난다음 할 작업
        // 애니메이션이 모두 종료 되기 전에 실행 됨
        console.log("애니메이션 종료 후 작업(콜백함수로 넣어야 함)");
      });

      $("#btn4").click(function(){
        $("div").animate({left: "250px"})
        .animate({top: "250px"})
        .animate({left: "0px"})
        .animate({top: "50px"});
      });


      $("#stop").click(function(){
        // 한번만 클릭시, 하나의 애니메이션만 끝남.
        // $("div").stop();
        
        // 모든 애니메이션을 즉시 멈춤, 현재 상태 유지(마지막 장면으로 가지않고 stop위치에 머뭄)
        // $("div").stop(true, false);

        // 모든 애니메이션을 즉시 멈춤, 진행중인 애니메이션의 마지막 장면으로 이동
        // $("div").stop(true, true);
        
        // 현재 애니메이션 위치에서 바로, 다음 애니메이션 실행(기본값)
        // $("div").stop(false, false);
        
        // 현재 애니메이션의 마지막 장면으로 바로 가서 종료, 다음 애니메이션 실행
        // $("div").stop(false, true);

      });
    });
  </script>
</head>
<body>
  <button id="btn1">atn1</button>
  <button id="btn2">btn2</button>
  <button id="btn3">btn3</button>
  <button id="btn4">btn4</button>
  <button id="stop">stop</button>
  <div style="background-color: olive;height: 100px;width: 100px;position: absolute;"></div>
</body>
</html>
```



#### Crousel

- 애니메이션을 이용한 슬라이드 제작

*예제1-1)*

```html
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>slider</title>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <style>
      .animation_canvas {
        overflow: hidden;
        position: relative;
        width: 600px;
        height: 400px;
      }

      /* Slider Panel */
      .slider_panel {width: 3000px;position: relative;}
      .slider_image {
        float: left;
        width: 600px;
        height: 400px;
      }

      /* Control Panel */
      .control_panel {
        position: absolute;
        bottom: 10px;
        left: 270px;
        overflow: hidden;
        color: white;
      }
      .dot {font-size: 30px;cursor: pointer;}
    </style>

    <script>
      $(document).ready(function () {
        // 슬라이더를 움직여주는 함수
        function moveSlider(index) {
          var willMoveLeft = -(index * 600);
          $(".slider_panel").animate({ left: willMoveLeft }, "slow");
        }

        $(".dot").click(function () {
          moveSlider($(this).index());
        });
      });
    </script>
  </head>

  <body>
    <div class="animation_canvas">
      <div class="slider_panel">
        <img src="img/pic1.jpg" class="slider_image" />
        <img src="img/pic2.jpg" class="slider_image" />
        <img src="img/pic3.jpg" class="slider_image" />
        <img src="img/pic4.jpg" class="slider_image" />
        <img src="img/pic5.jpg" class="slider_image" />
      </div>

      <div class="control_panel" style="text-align: center">
        <span class="dot">*</span>
        <span class="dot">*</span>
        <span class="dot">*</span>
        <span class="dot">*</span>
        <span class="dot">*</span>
      </div>
    </div>
  </body>
</html>
```

*예제 1-2)*

- prev / next 버튼 추가

```html
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>02. prev/next 버튼 추가</title>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://kit.fontawesome.com/e7c9242ec2.js" crossorigin="anonymous"></script>
    <style>
      .animation_canvas {
        overflow: hidden;
        position: relative;
        width: 600px;
        height: 400px;
      }

      /* Slider Panel */
      .slider_panel {width: 3000px;position: relative;}
      .slider_image {
        float: left;
        width: 600px;
        height: 400px;
      }

      /* Control Panel */
      .control_panel {
        position: absolute;
        bottom: 10px;
        left: 270px;
        overflow: hidden;
        color: white;
      }
      .dot {font-size: 30px;cursor: pointer;}
      .handler {
        width: 100%;
        display: flex;
        justify-content: space-between;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        z-index: 10;
        padding: 1rem;
        box-sizing: border-box;
      }
      .handler i {
        color: white;
        font-size: 30px;
        cursor: pointer;
      }
      
    </style>

    <script>
      $(document).ready(function () {
        // 현재 인덱스(페이지)
        let page = 0;
        // 총 페이지
        let pages = $(".slider_panel img").length;
        

        // 슬라이더를 움직여주는 함수
        function moveSlider(index) {
          var willMoveLeft = -(index * 600);
          $(".slider_panel").animate({ left: willMoveLeft }, "slow");
        }

        $(".dot").click(function () {
          moveSlider($(this).index());
          page = $(this).index();
        });

        $(".fa-chevron-left").click(function() {
          if(page > 0){
            $(".slider_panel").animate({ left: "+=600px" }, "slow");
            --page;
          }else{
            $(".slider_panel").animate({ left: `${(pages-1)*(-600)}` }, "slow");
            page = pages-1;
          }
        });
        $(".fa-chevron-right").click(function(){
          if(page < pages-1){
            $(".slider_panel").animate({ left: "-=600px" }, "slow")
            ++page;
          }else{
            $(".slider_panel").animate({ left: "0px" }, "slow")
            page = 0;
          }
        });
        
      });
    </script>
  </head>

  <body>
    <div class="animation_canvas">
      <div class="slider_panel">
        <img src="img/pic1.jpg" class="slider_image" />
        <img src="img/pic2.jpg" class="slider_image" />
        <img src="img/pic3.jpg" class="slider_image" />
        <img src="img/pic4.jpg" class="slider_image" />
        <img src="img/pic5.jpg" class="slider_image" />
      </div>

      <div class="control_panel" style="text-align: center">
        <span class="dot">*</span>
        <span class="dot">*</span>
        <span class="dot">*</span>
        <span class="dot">*</span>
        <span class="dot">*</span>
      </div>

      <div class="handler">
        <i class="fa-solid fa-chevron-left"></i>
        <i class="fa-solid fa-chevron-right"></i>
      </div>
    </div>
  </body>
</html>
```



*예제2)*

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>slider</title>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <style>
      .animation_canvas {
        overflow: hidden;
        position: relative;
        width: 600px;
        height: 400px;
      }

      /* Slider Panel */
      .slider_panel {width: 600px;position: relative;}
      .slider_image {
        position: absolute;
        left: 0;
        top: 0;
        width: 600px;
        height: 400px;
      }
      .slider_image:nth-child(1) {z-index: 5;}
      .slider_image:nth-child(2) {z-index: 4;}
      .slider_image:nth-child(3) {z-index: 3;}
      .slider_image:nth-child(4) {z-index: 2;}
      .slider_image:nth-child(5) {z-index: 1;}

      /* Control Panel */
      .control_panel {
        position: absolute;
        bottom: 10px;
        left: 270px;
        overflow: hidden;
        color: white;
        z-index: 9999 !important;
      }
      .dot {font-size: 30px;cursor: pointer;}
    </style>

    <script>
      $(document).ready(function () {
        // 슬라이더를 움직여주는 함수
        var prevIndex = 0;
        function moveSlider(index) {
        // index가 prevIndex와 같다면 함수를 실행하지 않고 종료
          if (index == prevIndex) {return;}
          $(".slider_panel img").not(index).css("z-index", -1000);
          $(".slider_panel img").eq(prevIndex).css("z-index", -500);
          $(".slider_panel img").eq(index).css("z-index", 1000);
          if (prevIndex > index) {
            $(".slider_panel img").eq(index).css("left", "-600px");
            $(".slider_panel img")
              .eq(index)
              .animate({ left: 0 }, 500, "linear", null);
          } else {
            $(".slider_panel img").eq(index).css("left", "600px");
            $(".slider_panel img")
              .eq(index)
              .animate({ left: 0 }, 500, "linear", null);
          }
          prevIndex = index;
        }

        $(".dot").click(function () {
          moveSlider($(this).index());
        });
      });
    </script>
  </head>

  <body>
    <div class="animation_canvas">
      <div class="slider_panel">
        <img src="img/pic1.jpg" class="slider_image" />
        <img src="img/pic2.jpg" class="slider_image" />
        <img src="img/pic3.jpg" class="slider_image" />
        <img src="img/pic4.jpg" class="slider_image" />
        <img src="img/pic5.jpg" class="slider_image" />
      </div>

      <div class="control_panel" style="text-align: center">
        <span class="dot">*</span>
        <span class="dot">*</span>
        <span class="dot">*</span>
        <span class="dot">*</span>
        <span class="dot">*</span>
      </div>
    </div>
  </body>
</html>
```



*예제3)*

```html
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>moozi slider</title>
    <!------------------------------------------------------
   moozi slider
   © http://moozi.tistory.com . All rights reserved.
   자유롭게 사용 가능하나,  
   위 저작권 표시를 삭제 하지 마세요. ^^. 
   ------------------------------------------------------->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"/>
    <style>
      #slider {
        position: relative;
        overflow: hidden;
        margin: 0 auto;
        border-radius: 4px;
        background-color: #dddddd;
      }

      #slider ul {
        position: relative;
        margin: 0;
        padding: 0;
        list-style: none;
      }

      #slider ul li {
        position: relative;
        float: left;
        margin: 0;
        padding: 0;
        width: 500px;
        height: 300px;
        text-align: center;
        line-height: 300px;
      }
      #slider ul li img {
        width: 500px;
        height: 300px;
      }

      a.control_prev,
      a.control_next {
        position: absolute;
        top: 40%;
        z-index: 999;
        padding: 15px 10px;
        width: auto;
        height: auto;
        color: #eeeeee;
        text-decoration: none;
        font-weight: 600;
        font-size: 18px;
        opacity: 0.8;
        cursor: pointer;
      }

      a.control_prev:hover,
      a.control_next:hover {
        background: #2a2a2a;
        opacity: 1;
        transition: all 0.2s ease;
      }
      a.control_prev {border-radius: 0 2px 2px 0;}
      a.control_next {right: 0;border-radius: 2px 0 0 2px;}

      .dot {
        cursor: pointer;
        height: 7px;
        width: 7px;
        margin: 0 2px;
        background-color: #bbb;
        border-radius: 50%;
        display: inline-block;
        transition: background-color 0.6s ease;
      }
      .dot:hover {background-color: #717171;}
      .active {background-color: #222222;}

      #auto {
        color: #bbb;
        width: 15px;
        height: 15px;
        vertical-align: middle;
      }
      #auto:hover {color: #717171;}
      .active2 {color: #222222 !important;}
      .control_panel {
        width: 100%;
        position: absolute;
        bottom: 0;
      }
    </style>
    <script>
      $(document).ready(function ($) {
        var slideCount = $("#slider ul li").length;
        var slideWidth = $("#slider ul li").width(); //마스크의 크기
        var slideHeight = $("#slider ul li").height();
        var sliderUlWidth = slideCount * slideWidth;

        $("#slider").css({ width: slideWidth, height: slideHeight });

        $("#slider ul").css({
          width: sliderUlWidth,
          marginLeft: -$("#slider ul li").width(),
        });

        $("#slider ul li:last-child").prependTo("#slider ul"); //마지막것(4번)을 앞에 배치

        var index = 0;
        function moveLeft() {
          $("#slider ul").animate(
            {
              left: +slideWidth,
            },
            200,
            function () {
              $("#slider ul li:last-child").prependTo("#slider ul");
              $("#slider ul").css("left", "");
            }
          );
        }

        function moveRight() {
          $("#slider ul").animate(
            {
              left: -slideWidth,
            },
            200,
            function () {
              $("#slider ul li:first-child").appendTo("#slider ul");
              $("#slider ul").css("left", "");
            }
          );
        }

        $("a.control_prev").click(function () {
          stop();

          index--;
          if (index < 0) {
            index = $(".dot").length - 1;
          }
          console.log(index);
          moveLeft();
          $(".dot").removeClass("active");
          $(".dot").eq(index).addClass("active");
        });

        $("a.control_next").click(function () {
          stop();

          index++;
          if (index >= $(".dot").length) {
            index = 0;
          }
          //            console.log(index);
          moveRight();
          $(".dot").removeClass("active");
          $(".dot").eq(index).addClass("active");
        });

        $(".dot").click(function () {
          stop();

          clearInterval(id);

          var dotIndex = $(this).index() - 1;
          if (dotIndex < index) {
            for (i = 0; i < index - dotIndex; i++) {
              moveLeft();
            }
          } else if (dotIndex > index) {
            for (i = 0; i < dotIndex - index; i++) {
              moveRight();
            }
          }
          index = dotIndex;
          $(".dot").removeClass("active");
          $(".dot").eq(index).addClass("active");
        });

        var id = 0;
        var chk = 0;
        function auto() {
          id = setInterval(function () {
            index++;
            if (index >= $(".dot").length) {
              index = 0;
            }
            moveRight();
            $(".dot").removeClass("active");
            $(".dot").eq(index).addClass("active");
          }, 5000);
          $("#auto").addClass("active2");
          $("#auto").removeClass("fa-play-circle");
          $("#auto").addClass("fa-pause-circle");
          chk = 1;
        }
        function stop() {
          clearInterval(id);
          $("#auto").removeClass("active2");

          $("#auto").removeClass("fa-pause-circle");
          $("#auto").addClass("fa-play-circle");
          chk = 0;
        }

        auto(); //자동시작

        $("#auto").click(function () {
          if (chk == 1) {
            stop();
          } else {
            auto();
          }
        });
      });
    </script>
  </head>
  <body>
    <div id="slider">
      <a href="#" class="control_next"><i class="fa fa-chevron-right"></i> </a>
      <a href="#" class="control_prev"><i class="fa fa-chevron-left"></i> </a>
      <ul>
        <li style="background: #aaa"><img src="img/pic1.jpg" /></li>
        <li style="background: #ccc"><img src="img/pic2.jpg" /></li>
        <li style="background: #aaa"><img src="img/pic3.jpg" /></li>
        <li style="background: #ccc"><img src="img/pic4.jpg" /></li>
        <li style="background: #aaa"><img src="img/pic5.jpg" /></li>
      </ul>

      <div class="control_panel" style="text-align: center">
        <i id="auto" class="fa fa-pause-circle"></i>
        <span class="dot active"></span>
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
      </div>
    </div>
  </body>
</html>
```



#### Class

- `addClass`, `removeClass`, `toggleClass`를 사용하면 css코드와 jquery 코드를 분리할 수 있다.

- 즉, ui코드와 로직 코드를 분리할 수 있다.

  > **MVC 패턴**
  >
  > 1. `Model` 데이터
  > 2. `View` UI
  > 3. `Controller` 로직