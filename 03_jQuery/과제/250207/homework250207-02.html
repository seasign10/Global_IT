<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>02. pwd chk</title>
  <style>
    li {list-style: none; margin: 1rem 0;}
  </style>
  <script>
    function check(){
      if(document.joinForm.id.value==""){
        alert("아이디를 입력하세요.");
        document.joinForm.id.focus();
        return false;
      }
      if(document.joinForm.pw1.value==""){
        alert("비밀번호를 입력하세요.");
        document.joinForm.pw1.focus();
        return false;
      }
      // 2. 비밀번호가 8~20자 사이인지 체크하는 코드 작성
      const pwd = document.joinForm.pw1.value;
      if(pwd.length<=8||pwd.length>=20){
        alert("비밀번호는 8~20자 사이로 입력해주세요.");
        document.joinForm.pw1.select();
        return false;
      }
      if(document.joinForm.pw2.value==""){
        alert("비밀번호 확인을 입력하세요.");
        document.joinForm.pw2.focus();
        return false;
      }
      if(document.joinForm.pw1.value != document.joinForm.pw2.value){
        alert("비밀번호가 일치하지 않습니다.");
        document.joinForm.pw2.select(); 
        return false;
      }
      if(document.joinForm.email.value==""){
        alert("이메일을 입력하세요.");
        document.joinForm.id.focus();
        return false;
      }
      // 이메일 검수
      const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
      const email = document.joinForm.email.value;
      if(!emailRegex.test(document.joinForm.email.value)){
        alert("이메일 형식이 올바르지 않습니다.");
        document.joinForm.email.select();
        return emailRegex.test(email); // fasle
      }
    }
  </script>
</head>
<body>
  <div class="container">
    <h1>회원가입을 환영합니다.</h1>
    <form action="register.jsp" method="post" name="joinForm" onsubmit="return check()">
      <input type="hidden" name="type" value="direct">
      <ul>
        <li>
          <label for="uid">아이디</label>
          <input type="text" id="uid" name="id" placeholder="아이디를 입력하세요" autofocus>
        </li>
        <li>
          <label for="upw1">비밀번호</label>
          <input type="password" id="upw1" name="pw1">
        </li>
        <li>
          <label for="upw2">비밀번호 확인</label>
          <input type="password" id="upw2" name="pw2">
        </li>
        <li>
          <label for="uemail">이메일</label>
          <input type="text" id="uemail" name="email">
        </li>
        <li>
          <input type="radio" name="mailing" id="mailing_y" value="mailing_yes" checked>
          <label for="mailing_y">메일 수신</label>
          <input type="radio" name="mailing" id="mailing_n" value="mailing_no">
          <label for="mailing_n">메일 수신 안함</label>
        </li>
        <li>
          <label for="ubirth">생년월일</label>
          <input type="date" id="ubirth" name="ubirth">
        </li>
        <li>
          <label for="ufile">파일 선택</label>
          <input type="file" id="ufile" name="ufile">
        </li>
        <li>
          <label for="ucomment">자기소개</label>
          <textarea id="ucomment" name="introduce" cols="30" rows="5"></textarea>
        </li>
        <li>
          <label for="ujob">직업</label>
          <select id="ujob" name="job">
            <option value="developer">개발자</option>
            <option value="designer">디자이너</option>
            <option value="planner">기획자</option>
          </select>
        </li>
        <li>
          <label for="uhobby">취미</label><br>
          <input type="checkbox" name="hobby1" value="등산">
          <label for="hobby1">등산</label>
          <input type="checkbox" name="hobby2" value="낚시">
          <label for="hobby2">낚시</label>
          <input type="checkbox" name="hobby3" value="독서">
          <label for="hobby3">독서</label>
        </li>
      </ul>
      <div>
        <input type="submit" value="가입하기">
        <input type="reset" value="다시작성">
      </div>
    </form>
  </div>
</body>
</html>